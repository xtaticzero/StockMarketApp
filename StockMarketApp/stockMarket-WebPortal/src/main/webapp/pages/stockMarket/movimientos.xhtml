<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:pe="http://primefaces.org/ui/extensions">
    <html>

        <h:head>
            <style type="text/css">
                .ui-growl-image-info ~ .ui-growl-message, .ui-growl-item, .ui-growl-item-container{
                    border: #e4e4e4;    
                    background: #e4e4e4;
                    color:#0073ea;
                }
            </style>
        </h:head>

        <h:body>

            <p:growl id="growl" sticky="true" showDetail="true" life="3000" />
            <h:form prependId="false">
                <p:panelGrid style="margin-top:20px">
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="7">Compra</p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column style="font-weight: bold;">Emisora:</p:column>
                        <p:column>
                            <p:selectOneMenu id="emisoras" value="#{movimientoMB.selectEmisora}" 
                                             style="width:125px">
                                <f:selectItems value="#{movimientoMB.emisoras}" var="emisora" 
                                               itemLabel="#{emisora.nombre}" itemValue="#{emisora.emisora_id}" />
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column style="font-weight: bold;">Costo Unitario:</p:column>
                        <p:column>
                            <p:inputText value="#{movimientoMB.accion.costoUnitario}"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column style="font-weight: bold;">Cantidad:</p:column>
                        <p:column>
                            <p:inputText value="#{movimientoMB.accion.existencia}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>

                <p:spacer/>
                <p:commandButton value="+" action="#{movimientoMB.agregaCompra}" update="growl,dtCapAcc"/>

                <p:dataTable id="dtCapAcc" value="#{movimientoMB.capaAcciones}" var="ca">
                    <p:column headerText="Emisora">
                        <h:outputText value="#{ca.capa.emisora.nombre}" />
                    </p:column>
                    <p:column headerText="Fecha Compra">
                        <h:outputText value="#{ca.accion.fechaCompra}" />
                    </p:column>
                    <p:column headerText="Costo Unitario">
                        <h:outputText value="#{ca.accion.costoUnitario}" />
                    </p:column>
                    <p:column headerText="Existencia">
                        <h:outputText value="#{ca.accion.existencia}" />
                    </p:column>
                </p:dataTable>

            </h:form>
        </h:body>
    </html>
</f:view>